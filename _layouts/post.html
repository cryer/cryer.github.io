---
layout: default
---

<article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title">{{ page.title }}</h1>
    <div class="post-meta">
      <img src="/images/calendar.png" width="20px"/> 
      <time datetime="{{page.date | date: date_to_xmlschema}}" itemprop="datePublished" class="post-meta__date date">{{page.date | date: "%F"}}</time>  
      <!-- 注释掉每篇文章阅读次数 --> 
      <!--
      <span id="busuanzi_container_page_pv"> | 阅读：<span id="busuanzi_value_page_pv"></span>次</span>
      --> 
    </p>
    </div>
  </header>

  <section class="post">
    {{ content }}

  </section>
</article>

{% include new-old.html %}
{% include comments.html %}

<!-- ✅ 添加 Mermaid 支持 -->
{% if page.mermaid %}
<script src="/assets/js/mermaid.min.js"></script>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('pre code.language-mermaid').forEach(function(block) {
      // 安全检查：确保父节点是 <pre>
      if (block.parentNode.tagName !== 'PRE') return;

      var div = document.createElement('div');
      div.className = 'mermaid';
      div.textContent = block.textContent.trim();

      // ✅ 只替换 <pre> 标签，保留其他内容
      block.parentNode.replaceWith(div);
    });

    if (typeof mermaid !== 'undefined') {
      mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        securityLevel: 'loose',
        logLevel: 0 // 调试用，上线可设为 0
      });
    }
  });
</script>
{% endif %}
